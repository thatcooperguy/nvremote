appId: com.crazystream.client
productName: CrazyStream
copyright: Copyright (c) CrazyStream

# Prevent electron-builder from running its own npm install during packaging.
# In npm workspace setups, this step restructures node_modules and deletes
# app-builder-bin, causing spawn ENOENT failures.
npmRebuild: false

directories:
  output: release

files:
  - dist-electron/**/*
  - dist/**/*
  - "!node_modules/**/*"

win:
  target:
    - target: nsis
      arch:
        - x64
  artifactName: "CrazyStream-${version}-Setup.${ext}"
  publisherName: CrazyStream

nsis:
  oneClick: false
  perMachine: true
  allowToChangeInstallationDirectory: true
  deleteAppDataOnUninstall: false
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: CrazyStream

linux:
  target:
    - target: AppImage
      arch:
        - x64
  artifactName: "CrazyStream-${version}-x86_64.${ext}"
  category: Game
  desktop:
    StartupWMClass: CrazyStream

mac:
  target:
    - target: dmg
      arch:
        - universal
  artifactName: "CrazyStream-${version}-universal.${ext}"
  category: public.app-category.games

dmg:
  title: "CrazyStream ${version}"

protocols:
  name: CrazyStream Protocol
  schemes:
    - crazystream

extraResources:
  - from: resources/
    to: resources/
    filter:
      - "**/*"

publish:
  provider: generic
  url: https://github.com/thatcooperguy/nvstreamer/releases/latest
