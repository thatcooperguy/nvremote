appId: com.gridstreamer.client
productName: GridStreamer
copyright: Copyright (c) GridStreamer

# Prevent electron-builder from running its own npm install during packaging.
# In npm workspace setups, this step restructures node_modules and deletes
# app-builder-bin, causing spawn ENOENT failures.
npmRebuild: false

directories:
  output: release

files:
  - dist-electron/**/*
  - dist/**/*
  - "!node_modules/**/*"

win:
  target:
    - target: nsis
      arch:
        - x64
  artifactName: "GridStreamer-${version}-Setup.${ext}"
  publisherName: GridStreamer

nsis:
  oneClick: false
  perMachine: true
  allowToChangeInstallationDirectory: true
  deleteAppDataOnUninstall: false
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: GridStreamer

linux:
  target:
    - target: AppImage
      arch:
        - x64
  artifactName: "GridStreamer-${version}-x86_64.${ext}"
  category: Game
  desktop:
    StartupWMClass: GridStreamer

mac:
  target:
    - target: dmg
      arch:
        - universal
  artifactName: "GridStreamer-${version}-universal.${ext}"
  category: public.app-category.games

dmg:
  title: "GridStreamer ${version}"

protocols:
  name: GridStreamer Protocol
  schemes:
    - gridstreamer

extraResources:
  - from: resources/
    to: resources/
    filter:
      - "**/*"

publish:
  provider: generic
  url: https://github.com/thatcooperguy/nvstreamer/releases/latest
